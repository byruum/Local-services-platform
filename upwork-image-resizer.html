<script>
function resizeImage() {
  const input = document.getElementById("imageInput");
  const result = document.getElementById("result");

  if (!input.files.length) {
    alert("Please select an image.");
    return;
  }

  const file = input.files[0];
  const img = new Image();
  const reader = new FileReader();

  reader.onload = e => img.src = e.target.result;

  img.onload = () => {
    let width = img.width;
    let height = img.height;

    // ✅ MINIMUM REQUIREMENTS (Upwork)
    if (width < 1000 || height < 750) {
      result.innerHTML = `
        ❌ Image too small.<br>
        Upwork requires at least <strong>1000 × 750 px</strong>.<br>
        Your image is <strong>${width} × ${height}px</strong>.
      `;
      return;
    }

    // ✅ MAXIMUM REQUIREMENTS (Upwork)
    const MAX = 4000;

    if (width > MAX || height > MAX) {
      const scale = Math.min(MAX / width, MAX / height);
      width = Math.round(width * scale);
      height = Math.round(height * scale);
    }

    const canvas = document.getElementById("canvas");
    canvas.width = width;
    canvas.height = height;

    const ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0, width, height);

    canvas.toBlob(blob => {
      const url = URL.createObjectURL(blob);
      result.innerHTML = `
        ✅ Image ready for Upwork<br>
        Final size: <strong>${width} × ${height}px</strong><br>
        <a href="${url}" download="upwork-image.jpg">Download image</a>
      `;
    }, "image/jpeg", 0.92);
  };

  reader.readAsDataURL(file);
}
</script>
