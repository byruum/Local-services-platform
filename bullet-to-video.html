<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bullet to Video Commentary Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f6f8;
        margin: 0;
        padding: 20px;
    }
    h1 {
        text-align: center;
    }
    form {
        max-width: 800px;
        margin: auto;
        background: #fff;
        padding: 20px;
        border-radius: 6px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label {
        font-weight: bold;
        display: block;
        margin-top: 15px;
    }
    input, textarea, select, button {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        box-sizing: border-box;
    }
    textarea {
        min-height: 80px;
    }
    button {
        background: #007bff;
        color: #fff;
        border: none;
        cursor: pointer;
        margin-top: 20px;
        font-size: 16px;
    }
    button:hover {
        background: #0056b3;
    }
    #scriptPreview, #scenePreview {
        max-width: 800px;
        margin: 30px auto;
        background: #fff;
        padding: 20px;
        border-radius: 6px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
        white-space: pre-wrap;
    }
    .scene {
        padding: 10px;
        border-bottom: 1px solid #ddd;
    }
</style>
</head>

<body>

<h1>Bullet â†’ Video Commentary Engine</h1>

<form id="commentaryForm">

    <label>Topic</label>
    <input type="text" placeholder="What are we talking about?" required>

    <label>How it happened (one point per line)</label>
    <textarea placeholder="Point one&#10;Point two"></textarea>

    <label>Why it should not happen</label>
    <textarea placeholder="Reason one&#10;Reason two"></textarea>

    <label>How it can be resolved</label>
    <textarea placeholder="Solution one&#10;Solution two"></textarea>

    <label>Tone</label>
    <select>
        <option>Emotional</option>
        <option>Strong</option>
        <option>Calm</option>
    </select>

    <button type="submit">Generate Script & Scenes</button>
</form>

<div id="scriptPreview"></div>
<div id="scenePreview"></div>

<script>
document.getElementById("commentaryForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const inputs = document.querySelectorAll("input, textarea, select");

    const topic = inputs[0].value;
    const happened = inputs[1].value.split("\n").filter(Boolean);
    const why = inputs[2].value.split("\n").filter(Boolean);
    const resolve = inputs[3].value.split("\n").filter(Boolean);
    const tone = inputs[4].value;

    let script = "";

    script += `Today we need to talk about ${topic}.\n\n`;

    if (happened.length) {
        script += "Here is how it happened.\n";
        happened.forEach(p => script += `- ${p}\n`);
        script += "\n";
    }

    if (why.length) {
        script += "This should not be happening because.\n";
        why.forEach(p => script += `- ${p}\n`);
        script += "\n";
    }

    if (resolve.length) {
        script += "Here is how we can fix this.\n";
        resolve.forEach(p => script += `- ${p}\n`);
        script += "\n";
    }

    script += `This message is delivered in a ${tone.toLowerCase()} tone.`;

    const spoken = makeSpoken(script, tone);

    document.getElementById("scriptPreview").innerText =
        "Generated Narration Script:\n\n" + spoken;

    generateScenes(script);
});

function generateScenes(script) {
    const parts = script.split("\n\n"); // PARAGRAPH-BASED SCENES
    const container = document.getElementById("scenePreview");

    container.innerHTML = "<h3>Generated Video Scenes</h3>";

    parts.forEach((text, index) => {
        if (text.trim()) {
            const div = document.createElement("div");
            div.className = "scene";
            div.innerHTML = `<strong>Scene ${index + 1}</strong><br>${text}`;
            container.appendChild(div);
        }
    });
}

function makeSpoken(script, tone) {
    let spoken = script.replace(/-/g, "").replace(/\n/g, " ");

    if (tone === "Emotional") {
        spoken = "Listen carefully. " + spoken;
    }
    if (tone === "Strong") {
        spoken = "Let me be very clear. " + spoken;
    }

    return spoken;
}
</script>

</body>
</html>
