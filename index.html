<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Nairobi Locals ‚Äì Adult Services Marketplace</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body { font-family: Arial, sans-serif; margin:0; background:#f7f7f7; }
header { background:#111; color:#fff; padding:15px; text-align:center; }
header h1 { margin:0; color:#e53935; }
.container { padding:20px; max-width:1100px; margin:auto; }

.disclaimer {
  background:#fff3cd;
  border-left:6px solid #e53935;
  padding:15px;
  margin-bottom:20px;
}
.disclaimer strong { color:#e53935; }

button { padding:10px 15px; cursor:pointer; }
input, select, textarea { padding:8px; width:100%; margin-bottom:10px; }

.card {
  background:#fff;
  padding:15px;
  margin-bottom:15px;
  border-radius:5px;
  box-shadow:0 0 5px rgba(0,0,0,0.1);
}

.hidden { display:none; }

.actions a {
  margin-right:10px;
  text-decoration:none;
  padding:8px 12px;
  color:#fff;
  border-radius:4px;
}
.call { background:#4caf50; }
.whatsapp { background:#25d366; }

.price-box { background:#f1f1f1; padding:10px; margin-top:10px; }

footer { text-align:center; padding:20px; font-size:14px; color:#666; }
</style>
</head>

<body>

<header>
  <h1>Nairobi Locals</h1>
  <p>Discreet ‚Ä¢ Professional ‚Ä¢ Adult-Only Marketplace</p>
</header>

<div class="container">

<div class="disclaimer">
<strong>DISCLAIMER:</strong><br>
This platform is strictly for adults (18+). Nairobi Locals does not provide services directly.
All listings are independent service providers. No explicit content is displayed.
</div>

<h3>Find Services</h3>
<select id="locationFilter">
<option value="">Select Location</option>
<option>CBD</option>
<option>Embakasi</option>
<option>Kilimani</option>
<option>Westlands</option>
<option>Ruiru</option>
</select>

<select id="subLocationFilter">
<option value="">Sub-Location</option>
<option>Pipeline</option>
<option>Tassia</option>
<option>Fedha</option>
<option>Karen</option>
<option>Ruaka</option>
</select>

<button onclick="loadListings()">Search</button>

<hr>

<div id="publicListings"></div>

<hr>

<h3>Want to offer services?</h3>
<button onclick="showLogin()">Login</button>
<button onclick="showRegister()">Create Account</button>

<!-- REGISTER -->
<div id="registerBox" class="card hidden">
<h3>Provider Registration</h3>
<input id="regName" placeholder="Display Name">
<input id="regPhone" placeholder="Phone Number">
<input id="regEmail" placeholder="Email">
<input id="regPassword" type="password" placeholder="Password">
<button onclick="registerProvider()">Register (Free 24h)</button>
</div>

<!-- LOGIN -->
<div id="loginBox" class="card hidden">
<h3>Provider Login</h3>
<input id="loginEmail" placeholder="Email">
<input id="loginPassword" type="password" placeholder="Password">
<button onclick="login()">Login</button>
<button onclick="resetPassword()">Forgot Password</button>
<p id="loginStatus"></p>
</div>

<!-- DASHBOARD -->
<div id="providerDashboard" class="card hidden">
<h3>Provider Dashboard</h3>
<p id="expiryInfo"></p>

<div class="price-box">
<strong>Upgrade Listing</strong><br>
<button onclick="upgrade(1)">Daily ‚Äì 150</button>
<button onclick="upgrade(4)">4 Days ‚Äì 400</button>
<button onclick="upgrade(30)">Monthly ‚Äì 1200</button><br><br>
<button onclick="vip()">VIP Boost +150</button>
</div>

<h4>üì• Inquiries</h4>
<div id="inbox"></div>

<button onclick="logout()">Logout</button>
</div>

</div>

<footer>
Support: <a href="mailto:workwithbyram@gmail.com">workwithbyram@gmail.com</a>
</footer>

<script>
let currentUser = null;

function showRegister(){ hideAll(); registerBox.classList.remove("hidden"); }
function showLogin(){ hideAll(); loginBox.classList.remove("hidden"); }
function hideAll(){ registerBox.classList.add("hidden"); loginBox.classList.add("hidden"); providerDashboard.classList.add("hidden"); }

function registerProvider(){
  const user = {
    name: regName.value,
    phone: regPhone.value,
    email: regEmail.value,
    password: regPassword.value,
    createdAt: Date.now(),
    freeUntil: Date.now()+86400000,
    paidUntil:null,
    vip:false,
    inbox:[]
  };
  localStorage.setItem("provider_"+user.email, JSON.stringify(user));
  alert("Registered. Free listing active for 24 hours.");
}

function login(){
  const data = localStorage.getItem("provider_"+loginEmail.value);
  if(!data){ loginStatus.innerText="Account not found"; return; }
  const u = JSON.parse(data);
  if(u.password!==loginPassword.value){ loginStatus.innerText="Wrong password"; return; }
  currentUser=u;
  hideAll();
  providerDashboard.classList.remove("hidden");
  checkExpiry();
  loadInbox();
}

function checkExpiry(){
  const until = currentUser.paidUntil || currentUser.freeUntil;
  expiryInfo.innerText = Date.now()>until ? "Listing expired" : "Active until "+new Date(until).toLocaleString();
}

function upgrade(days){
  currentUser.paidUntil = Date.now()+days*86400000;
  localStorage.setItem("provider_"+currentUser.email, JSON.stringify(currentUser));
  alert("Upgrade successful");
  checkExpiry();
}

function vip(){
  currentUser.vip=true;
  localStorage.setItem("provider_"+currentUser.email, JSON.stringify(currentUser));
  alert("VIP enabled");
}

function logout(){ currentUser=null; hideAll(); }

function resetPassword(){ alert("Password reset email sent (simulation)"); }

function loadListings(){
  publicListings.innerHTML="";
  for(let k in localStorage){
    if(k.startsWith("provider_")){
      const u=JSON.parse(localStorage[k]);
      const until=u.paidUntil||u.freeUntil;
      if(Date.now()<until){
        publicListings.innerHTML+=`
        <div class="card">
          <strong>${u.name}</strong> ${u.vip?"‚≠êVIP":""}
          <div class="actions">
            <a class="call" href="tel:${u.phone}">Call</a>
            <a class="whatsapp" href="https://wa.me/${u.phone}">WhatsApp</a>
          </div>
          <textarea id="msg_${u.email}" placeholder="Send inquiry"></textarea>
          <button onclick="sendMessage('${u.email}')">Send Inquiry</button>
        </div>`;
      }
    }
  }
}

function sendMessage(email){
  const msg=document.getElementById("msg_"+email).value;
  const u=JSON.parse(localStorage.getItem("provider_"+email));
  u.inbox.push({text:msg,time:new Date().toLocaleString()});
  localStorage.setItem("provider_"+email, JSON.stringify(u));
  alert("Message sent");
}

function loadInbox(){
  inbox.innerHTML="";
  currentUser.inbox.forEach(m=>{
    inbox.innerHTML+=`<div class="card">${m.text}<br><small>${m.time}</small></div>`;
  });
}
</script>

</body>
</html>
