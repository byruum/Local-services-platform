<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WebTool â€“ Tools</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f5f7fb;
  margin: 0;
  padding: 0;
}

header {
  background: #1a73e8;
  color: white;
  padding: 15px;
  text-align: center;
}

.container {
  max-width: 900px;
  margin: auto;
  padding: 20px;
}

.tool {
  background: white;
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 25px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.tool h2 {
  margin-top: 0;
}

button {
  background: #1a73e8;
  color: white;
  border: none;
  padding: 10px 16px;
  border-radius: 6px;
  cursor: pointer;
}

button:hover {
  background: #1558b0;
}

input[type="file"] {
  margin: 10px 0;
}

.status {
  margin-top: 10px;
  font-size: 14px;
}

footer {
  text-align: center;
  font-size: 13px;
  color: #666;
  padding: 20px;
}
</style>
</head>

<body>

<header>
  <h1>WebTool â€“ Online Tools</h1>
</header>

<div class="container">

  <!-- OTHER TOOLS (UNCHANGED) -->
  <div class="tool">
    <h2>Image Resizer</h2>
    <p>Resize images for web use.</p>
    <button>Open Tool</button>
  </div>

  <!-- âœ… UPWORK IMAGE RESIZER -->
  <div class="tool">
    <h2>Upwork Image Resizer</h2>
    <p>
      Ensures images meet <b>Upwork gallery requirements</b> without quality loss.
    </p>

    <input type="file" id="upworkInput" accept="image/png,image/jpeg">
    <br>
    <button onclick="processUpworkImage()">Check & Fix Image</button>

    <div class="status" id="upworkStatus"></div>
    <a id="downloadLink" style="display:none;" download>Download Fixed Image</a>
  </div>

</div>

<footer>
  Â© 2026 WebTool â€¢ Privacy Safe â€¢ No Image Storage
</footer>

<script>
function processUpworkImage() {
  const input = document.getElementById("upworkInput");
  const status = document.getElementById("upworkStatus");
  const link = document.getElementById("downloadLink");

  if (!input.files.length) {
    status.textContent = "Please choose an image.";
    return;
  }

  const file = input.files[0];
  const img = new Image();
  const reader = new FileReader();

  reader.onload = e => img.src = e.target.result;
  reader.readAsDataURL(file);

  img.onload = () => {
    let w = img.width;
    let h = img.height;

    // âœ… Check Upwork rules
    const minOK = (w >= 1000 && h >= 750) || (h >= 1000 && w >= 750);
    const maxOK = w <= 4000 && h <= 4000;

    if (minOK && maxOK) {
      status.innerHTML = "âœ… Image already meets Upwork requirements. No changes made.";
      link.style.display = "none";
      return;
    }

    // ðŸ”§ Resize only if needed
    let scale = 1;

    if (w > 4000 || h > 4000) {
      scale = Math.min(4000 / w, 4000 / h);
    } else if (w < 1000 && h < 1000) {
      scale = Math.max(1000 / w, 1000 / h);
    }

    const newW = Math.round(w * scale);
    const newH = Math.round(h * scale);

    const canvas = document.createElement("canvas");
    canvas.width = newW;
    canvas.height = newH;

    const ctx = canvas.getContext("2d");
    ctx.imageSmoothingEnabled = true;
    ctx.imageSmoothingQuality = "high";
    ctx.drawImage(img, 0, 0, newW, newH);

    canvas.toBlob(blob => {
      const url = URL.createObjectURL(blob);
      link.href = url;
      link.style.display = "inline-block";
      link.textContent = "Download Upwork-Ready Image";

      status.innerHTML = `
        âš  Image adjusted to meet Upwork rules.<br>
        New size: <b>${newW} Ã— ${newH}</b>
      `;
    }, file.type, 0.98);
  };
}
</script>

</body>
</html>
